define("component/Dialog",["require","exports","module","component/UIBase","base/base","underscore","base/eventEmitter"],function(t){var e=t("./UIBase"),i=(t("../base/base"),t("underscore")),n=t("base/eventEmitter");return e.extend({options:{id:"",titleText:"默认标题",content:"默认内容",position:{left:360,top:100},isSingle:!1,isModal:!1,hasClose:!0,hideInsteadofClose:!1,className:"dialog",onclose:function(){},zIndex:99999},_type:"dialog",_init:function(){this.options.id=this.id=this.getId(),n.setOwner(this),this.render(),this._bindResizeHander()},_getInnerString:function(){var t=(document,this),e=['<div class="dialog-title">'];return e.push('<div class="dialog-title-text">'),e.push(t.options.titleText),e.push("</div>"),this.options.hasClose&&(e.push('<a href="javascript:void(0);" class="dialog-close">&nbsp;'),e.push("</a>")),e.push("</div>"),e.push('<div class="dialog-content">'),e.push(t._getContentHTML()),e.push("</div>"),e.join("")},_update:function(){var t=this,e=t.getContainer();if(e){var i="#"+t.id+" .dialog-title-text",n=$(i);n.length&&n.html(t.options.titleText);var o="#"+t.id+" .dialog-content",s=$(o);s.length&&s.html(t._getContentHTML()),$.holmes.setPosition(e,t.options.position)}},_setIFrame:function(t,e,i){var n='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="javascript:false;"style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');top:0px;left:0px;width:'+e+"px;height:"+i+'px;"/>';0===$(t).find("bgiframe").length&&$(t).before(n)},_getContentHTML:function(){var t=this,e=document;if(i.isString(t.options.content))return t.options.content;if(i.isElement(t.options.content)){$(t.options.content).show();var n=e.createElement("div");return $(n).append(t.options.content),$(n).html()}return""},setTitleText:function(t){var e=this;i.isString(t)&&(e.options.titleText=t),e._update()},setContent:function(t){var e=this,n=t;(i.isString(n)||i.isElement(n))&&(e.options.content=n),e._update()},render:function(){var t=document,e=this,i=t.createElement("div");i.id=e.id,i.className="dialog-container "+e.options.className;if(e.options.isModal){var n=e.options.zIndex-1,o=t.createElement("div");if(o.className=e.options.className+" modal",o.id=e.id+"modal",$(o).css({position:"absolute",top:0,left:0,"background-color":"black",width:$(document).width(),height:$(document).height(),opacity:.6,"z-index":n}),$(t.body).append(o),$.browser.msie&&+$.browser.version<7){var s=t.createElement("div");o.appendChild(s),e._setIFrame(o.firstChild,$(window).width(),$(window).height())}}if(i.innerHTML=e._getInnerString(),t.body.appendChild(i),$.browser.msie&&+$.browser.version<7&&e._setIFrame(i.firstChild,i.offsetWidth,i.offsetHeight),$(e.getContainer()).css({position:"absolute","z-index":e.options.zIndex}),e.options.width&&($(e.getContainer()).css({width:e.options.width}),e.options.position.left=$(window).scrollLeft()+($(window).width()-e.options.width)/2,e.options.position.top=Math.max($(window).scrollTop()+($(window).height()-e.getContainer().offsetHeight)/2,0)),$.holmes.setPosition(e.getContainer(),{left:e.options.position.left,top:e.options.position.top}),this.options.hasClose){var r="#"+e.id+" .dialog-close";$(r).on("click",function(){e.options.hideInsteadofClose?e.hide():e.close()})}e.hide()},getContainer:function(){return $("#"+this.id)[0]},setPosition:function(t){var e=this;e.options.position.left=t.left,e.options.position.top=t.top,e._update()},fixPosition:function(){var t=this;t.getContainer()&&(t.options.width&&($(t.getContainer()).css({width:t.options.width}),t.options.position.left=$(window).scrollLeft()+($(window).width()-t.options.width)/2,t.options.position.top=Math.max($(window).scrollTop()+($(window).height()-t.getContainer().offsetHeight)/2,0)),$(t.getContainer()).css({left:t.options.position.left,top:t.options.position.top}));var e=this.getModalContainer();e.css({width:$(document).width(),height:$(document).height()})},show:function(){var t=this;$(t.getContainer()).show(),this.fixPosition(),t.getModalContainer()&&$(t.getModalContainer()).show()},hide:function(){var t=this;$(t.getContainer()).hide(),t.getModalContainer()&&$(t.getModalContainer()).hide()},close:function(){this.options.isSingle?this.hide():(this.getContainer()&&$(this.getContainer()).remove(),this.getModalContainer()&&$(this.getModalContainer()).remove(),$(window).off("resize",this.fixPosition),$(window).off("scroll",this.fixPosition)),n.trigger("onclose")},getModalContainer:function(){return $("#"+this.id+"modal")},_modalResizeHandler:function(){for(var t=$(".modal"),e=0;e<t.length;e++)$(t[e]).css({width:$(window).width(),height:$(window).height()})},_bindResizeHander:function(){var t=this;$(window).resize(function(){t.fixPosition()}),$(window).on("scroll",function(){t.fixPosition()})}})}),define("base/aceTemplate.min",[],function(){function t(t){var e=[];e.push("with(this){"),e.push(t.replace(/[\r\n]+/g,"\n").replace(/^\n+|\s+$/gm,"").replace(/((^\s*[<>!#^&\u0000-\u0008\u007F-\uffff].*$|^.*[<>]\s*$|^(?!\s*(else|do|try|finally)\s*$)[^'":;,\[\]{}()\n\/]+$|^(\s*(([\w-]+\s*=\s*"[^"]*")|([\w-]+\s*=\s*'[^']*')))+\s*$|^\s*([.#][\w-.]+(:\w+)?(\s*|,))*(?!(else|do|while|try|return)\b)[.#]?[\w-.*]+(:\w+)?\s*\{.*$)\s?)+/gm,function(t){return t=['"',t.replace(/&none;/g,"").replace(/["'\\]/g,"\\$&").replace(/\n/g,"\\n").replace(/(!?!?#)\{(.*?)\}/g,function(t,e,i){i=i.replace(/\\n/g,"\n").replace(/\\([\\'"])/g,"$1");var n=/^[a-z$][\w+$]+$/i.test(i)&&!/^(true|false|NaN|null|this)$/.test(i);return['",',n?["typeof ",i,'=="undefined"?"":'].join(""):"","#"==e?"_encode_":"!!#"==e?"_encodeAttr_":"","(",i,'),"'].join("")}),'"'].join("").replace(/^"",|,""$/g,""),t?["_output_.push(",t,");"].join(""):""})),e.push("}");var i=new Function("_output_","_encode_","helper","_encodeAttr_",e.join(""));return i}var e=e||{},i={"#39":"'",quot:'"',lt:"<",gt:">",amp:"&",nbsp:" "},n={"'":"#39",'"':"quot","<":"lt",">":"gt","&":"amp"," ":"nbsp"},o={g:function(t){return"string"!=typeof t?t:document.getElementById(t)},decodeHTML:function(t){return String(t).replace(/&(#39|quot|lt|gt|amp|nbsp);/gi,function(t,e){return i[e]}).replace(/&#u([a-f\d]{4});/gi,function(t,e){return String.fromCharCode(parseInt("0x"+e))}).replace(/&#(\d+);/gi,function(t,e){return String.fromCharCode(+e)})},encodeAttr:function(t){return String(t).replace(/["']/g,function(t){return"&"+n[t]+";"})},encodeHTML:function(t){return String(t).replace(/['"<>& ]/g,function(t){return"&"+n[t]+";"})},elementText:function(t){return t&&t.tagName?/^(input|textarea)$/i.test(t.tagName)?t.value:o.decodeHTML(t.innerHTML):""}},s={},r=!1;return e.format=function(e,i,n){if(!e)return"";var r,a;"object"==typeof e&&e.tagName&&(a=e,e=a.getAttribute("id")),n=n||this,r=s[e],r||(/[^\w-]/.test(e)?r=t(e):(a||(a=o.g(e)),r=this.register(e,a)));var d=[];return r.call(i||"",d,o.encodeHTML,n,o.encodeAttr),d.join("")},e.register=function(e,i){if(!arguments.length&&!r){r=!0;for(var n=document.getElementsByTagName("script"),a=0;a<n.length;a++){var d=n[a];if(/^(text\/template)$/i.test(d.getAttribute("type"))){var e=d.getAttribute("id");e&&arguments.callee.call(this,e,d)}}}if(e)return s[e]?s[e]:("string"!=typeof i&&("undefined"==typeof i&&(i=o.g(e)),i=o.elementText(i)),s[e]=t(i))},e.unregister=function(t){delete s[t]},e.format&&(e._format=e.format,e.format=function(t,i,n){var o=e._format(t,i,n);return String(o).replace(/(.+?)>\s*<(.+?)/g,"$1><$2")}),e}),require(["jquery","domReady","component/Dialog","component/Tabs","base/aceTemplate.min","base/util"],function(t,e,i,n,o,s){var r=t(".media-wrapper"),a=t(".media-content-detail"),d=a.find(".media-content-detail-body");t(".media-wrapper .more").on("click",function(){var e=t(this).data("index"),i=d.eq(+e);t("#current-media-title").html(i.find(".media-content-detail-body-title h2").html()),a.show(),d.hide(),i.show(),r.hide(),t(window).scrollTop(0)}),t("#overview-link").on("click",function(){a.hide(),r.show()})}),define("media",["jquery","domReady","component/Dialog","component/Tabs","base/aceTemplate.min","base/util"],function(){});